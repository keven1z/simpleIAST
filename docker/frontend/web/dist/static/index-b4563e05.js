import{p as ue,r as g,Z as O,d as re,ai as i,aq as de,q as u,t as C,U as l,O as a,v as d,S as r,F as z,a8 as S,u as c,R as $,M as v,a9 as ce,P as A,T as B}from"./vue-8cd83afb.js";import{K as pe,B as me,L as _e,M as fe,N as ge,E as h,O as ve}from"./element-4f7446fd.js";import{_ as be}from"./index-db029066.js";import{a as he,b as ye,c as we}from"./index-15defa6a.js";import{l as W,a as T}from"./level-407f4ac4.js";/* empty css                                                       */import"./vxe-d278ed3b.js";const Ve={class:"app-container"},Ce={class:"dialog-footer"},ke={class:"toolbar-wrapper"},xe={class:"table-wrapper"},ze={class:"project-name-display"},Se={style:{"font-weight":"500",cursor:"pointer"}},Be={class:"project-tags"},De={class:"importance-display"},Ne={class:"demo-pagination-block"},F="60px",Ue=ue({__name:"index",setup(je){const y=g(""),D=g(!1),Z=()=>{D.value=!0,setTimeout(()=>{const o=document.querySelector(".el-input__inner");o==null||o.focus()},100)},k=g(!1),G=g(!1),N=g([]),U=g(0),p={pageSize:20,pageNum:1},s=O({name:"",importance:void 0,tags:""}),m=()=>{k.value=!0;const o={...p,name:s.name,importance:s.importance,tags:s.tags};he(o).then(t=>{N.value=t.data.list,U.value=t.data.total}).catch(()=>{N.value=[],U.value=0}).finally(()=>{k.value=!1})};m();const w=g([]),H=o=>{w.value=o};function J(){if(!w.value||w.value.length===0){h.warning("请选择删除项目");return}ve.confirm(`确定要删除选中的${w.value.length}个项目吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const o=w.value.map(t=>{var _;return((_=t.id)==null?void 0:_.toString())||""});return ye(o)}).then(()=>{h.success("删除项目成功")}).catch(o=>{o==="cancel"?h.info("已取消删除操作"):h.error("删除项目失败")}).finally(()=>{m()})}const V=g(!1),n=O({name:"",tag:"",level:1});function Q(){V.value=!1;const o={...n,id:0};we(o).then(()=>{h.success("添加项目成功")}).catch(()=>{h.warning("添加项目失败")}).finally(()=>{m()})}function X(){V.value=!0}re([()=>p.pageNum,()=>p.pageSize],m,{immediate:!0});const Y=o=>{p.pageSize=o,m()};function ee(o){let t=[];n.tag!=""&&(t=n.tag.split(",")),t=t.filter(_=>_!==o),n.tag=t.join(",")}function L(){let o;y.value&&(n.tag==""?o=[]:o=n.tag.split(","),o.push(y.value),n.tag=o.join(",")),D.value=!1,y.value=""}const le=o=>{p.pageNum=o,m()},ae=o=>{},te=()=>{s.name="",s.importance=void 0,s.tags="",m()};function oe(o,t){return o.id!=1}return(o,t)=>{const _=i("el-input"),b=i("el-form-item"),q=i("el-option"),E=i("el-select"),j=i("el-tag"),f=i("el-button"),I=i("el-form"),ne=i("el-dialog"),K=i("el-card"),M=i("el-tooltip"),x=i("el-table-column"),se=i("el-table"),ie=i("el-pagination"),P=de("loading");return u(),C("div",Ve,[l(ne,{modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=e=>V.value=e),title:"添加项目"},{footer:a(()=>[d("span",Ce,[l(f,{onClick:t[3]||(t[3]=e=>V.value=!1)},{default:a(()=>[r("取消")]),_:1}),l(f,{type:"primary",onClick:Q},{default:a(()=>[r(" 确认 ")]),_:1})])]),default:a(()=>[l(I,{model:n},{default:a(()=>[l(b,{label:"项目名","label-width":F},{default:a(()=>[l(_,{modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(b,{label:"重要性","label-width":F},{default:a(()=>[l(E,{modelValue:n.level,"onUpdate:modelValue":t[1]||(t[1]=e=>n.level=e)},{default:a(()=>[(u(!0),C(z,null,S(c(W),e=>(u(),v(q,{label:c(T)(e.value),value:e.value,key:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"标签","label-width":F},{default:a(()=>[n.tag?(u(!0),C(z,{key:0},S(n.tag.split(","),e=>(u(),v(j,{key:e,class:"mx-1",closable:"","disable-transitions":!1,onClose:R=>ee(e)},{default:a(()=>[r(B(e),1)]),_:2},1032,["onClose"]))),128)):$("",!0),D.value?(u(),v(_,{key:1,ref:"InputRef",modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=e=>y.value=e),class:"ml-1 w-20",size:"small",onKeyup:ce(L,["enter"]),onBlur:L},null,8,["modelValue","onKeyup"])):(u(),v(f,{key:2,class:"button-new-tag ml-1",size:"small",onClick:Z},{default:a(()=>[r(" + 标签 ")]),_:1}))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(K,{shadow:"never",class:"search-wrapper"},{default:a(()=>[l(I,{ref:"searchFormRef",inline:!0,model:s},{default:a(()=>[l(b,{prop:"username",label:"项目名"},{default:a(()=>[l(_,{modelValue:s.name,"onUpdate:modelValue":t[5]||(t[5]=e=>s.name=e),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(b,{prop:"importance",label:"重要性"},{default:a(()=>[l(E,{modelValue:s.importance,"onUpdate:modelValue":t[6]||(t[6]=e=>s.importance=e),placeholder:"请选择",style:{width:"120px"}},{default:a(()=>[(u(!0),C(z,null,S(c(W),e=>(u(),v(q,{label:c(T)(e.value),value:e.value,key:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(b,{prop:"tags",label:"标签"},{default:a(()=>[l(_,{modelValue:s.tags,"onUpdate:modelValue":t[7]||(t[7]=e=>s.tags=e),placeholder:"请输入标签"},null,8,["modelValue"])]),_:1}),l(b,null,{default:a(()=>[l(f,{type:"primary",icon:c(pe),onClick:m},{default:a(()=>[r("查询")]),_:1},8,["icon"]),l(f,{icon:c(me),onClick:te},{default:a(()=>[r("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),A((u(),v(K,null,{default:a(()=>[d("div",ke,[d("div",null,[l(f,{type:"primary",icon:c(_e),onClick:X},{default:a(()=>[r("新增项目")]),_:1},8,["icon"]),l(f,{type:"danger",icon:c(fe),onClick:J},{default:a(()=>[r("批量删除")]),_:1},8,["icon"])]),d("div",null,[l(M,{content:"刷新当前页"},{default:a(()=>[l(f,{type:"primary",icon:c(ge),circle:"",onClick:m},null,8,["icon"])]),_:1})])]),d("div",xe,[A((u(),v(se,{ref:"multipleTableRef",data:N.value,border:"",style:{width:"100%"},onSelectionChange:H,onRowClick:ae},{default:a(()=>[l(x,{selectable:oe,type:"selection",width:"55"}),l(x,{prop:"name",label:"项目名","min-width":"250"},{default:a(e=>[d("div",ze,[l(M,{content:e.row.name,placement:"top",effect:"dark"},{default:a(()=>[d("span",Se,B(e.row.name),1)]),_:2},1032,["content"]),d("div",Be,[e.row.tag?(u(!0),C(z,{key:0},S((e.row.tag||"").split(","),R=>(u(),v(j,{key:R,size:"small",effect:"light"},{default:a(()=>[r(B(R),1)]),_:2},1024))),128)):$("",!0)])])]),_:1}),l(x,{prop:"level",label:"重要性",width:"100",align:"center",sortable:""},{default:a(e=>[d("div",De,[l(j,{size:"small",type:e.row.level===1?"danger":e.row.level===2?"warning":"success",effect:"light"},{default:a(()=>[r(B(c(T)(e.row.level)),1)]),_:2},1032,["type"])])]),_:1}),l(x,{label:"选项",prop:""},{default:a(e=>[l(f,{type:"info",round:"",size:"small"},{default:a(()=>[r("详情")]),_:1})]),_:1})]),_:1},8,["data"])),[[P,k.value]])]),d("div",Ne,[l(ie,{"current-page":p.pageNum,"onUpdate:currentPage":t[8]||(t[8]=e=>p.pageNum=e),"page-size":p.pageSize,"onUpdate:pageSize":t[9]||(t[9]=e=>p.pageSize=e),"page-sizes":[10,20,50,100],small:!1,disabled:G.value,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:Y,onCurrentChange:le},null,8,["current-page","page-size","disabled","total"])])]),_:1})),[[P,k.value]])])}}});const Ke=be(Ue,[["__scopeId","data-v-c18150d8"]]);export{Ke as default};
